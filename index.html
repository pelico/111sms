<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>综合仪表板 - 导航、监控与通知</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>
  <style>
    :root {
      --primary: #1a237e; --primary-light: #303f9f; --success: #4caf50; --danger: #f44336;
      --warning: #ff9800; --dark: #121a26; --light: #f5f7fa; --card-bg: #ffffff;
      --primary-color: #3498db; --primary-hover: #2980b9; --background: #f8f9fa;
      --text-color: #333333; --text-light: #888888; --border-color: #e0e0e0;
      --error-color: #e74c3c; --success-color: #2ecc71;
    }
    
    * { box-sizing: border-box; margin: 0; padding: 0; }
    
    body {
      font-family: 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      background: linear-gradient(135deg, #1a2980, #26d0ce);
      color: #333;
      line-height: 1.6;
      min-height: 100vh;
      background-attachment: fixed;
    }
    
    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 20px;
    }
    
    /* 顶部导航栏样式 */
    .top-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 25px;
      background: rgba(255, 255, 255, 0.92);
      border-radius: 16px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
      margin-bottom: 20px;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.3);
    }
    
    .time-weather {
      display: flex;
      align-items: center;
      gap: 25px;
    }
    
    .time {
      font-size: 1.5rem;
      font-weight: 700;
      color: #1a73e8;
      text-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .date {
      font-size: 1rem;
      color: #5f6368;
      margin-top: 5px;
      font-weight: 500;
    }
    
    .weather {
      display: flex;
      align-items: center;
      gap: 10px;
      background: linear-gradient(120deg, #e0f7fa, #bbdefb);
      padding: 8px 20px;
      border-radius: 50px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.05);
    }
    
    .weather i {
      color: #ff9800;
      font-size: 1.5rem;
    }
    
    .weather-info {
      display: flex;
      flex-direction: column;
    }
    
    .temp {
      font-weight: 700;
      color: #1a237e;
    }
    
    .city {
      font-size: 0.9rem;
      color: #5f6368;
      font-weight: 500;
    }
    
    /* 搜索框样式 */
    .search-container {
      flex-grow: 1;
      max-width: 650px;
      margin: 0 30px;
    }
    
    .search-box {
      display: flex;
      height: 55px;
      border-radius: 30px;
      overflow: hidden;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
      transition: all 0.3s ease;
    }
    
    .search-box:hover {
      box-shadow: 0 6px 20px rgba(26, 115, 232, 0.4);
    }
    
    .search-box input {
      flex-grow: 1;
      border: none;
      padding: 0 25px;
      font-size: 1.1rem;
      outline: none;
      background: #fff;
    }
    
    .search-box button {
      width: 70px;
      background: #1a73e8;
      border: none;
      color: white;
      cursor: pointer;
      transition: background 0.3s;
      font-size: 1.2rem;
    }
    
    .search-box button:hover {
      background: #0d62da;
    }
    
    /* 主内容区域 */
    .main-content {
      display: grid;
      grid-template-columns: 300px 1fr;
      gap: 20px;
    }
    
    /* 左侧导航 */
    .sidebar {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 16px;
      padding: 25px;
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.15);
      height: fit-content;
    }
    
    .nav-tabs {
      list-style: none;
    }
    
    .nav-tabs li {
      margin-bottom: 10px;
    }
    
    .nav-tabs a {
      display: flex;
      align-items: center;
      padding: 12px 15px;
      background: #f8f9fa;
      border-radius: 10px;
      color: #202124;
      text-decoration: none;
      transition: all 0.3s ease;
      font-size: 1rem;
      font-weight: 500;
      border: 1px solid #e0e0e0;
    }
    
    .nav-tabs a:hover, .nav-tabs a.active {
      background: #e8f0fe;
      transform: translateX(5px);
      box-shadow: 0 5px 15px rgba(26, 115, 232, 0.2);
      border-color: #1a73e8;
    }
    
    .nav-tabs i {
      margin-right: 12px;
      font-size: 1.3rem;
      width: 24px;
      text-align: center;
    }
    
    /* 内容区域 */
    .content-area {
      min-height: 600px;
    }
    
    .page {
      display: none;
      background: rgba(255, 255, 255, 0.95);
      border-radius: 16px;
      padding: 25px;
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.15);
    }
    
    .page.active {
      display: block;
    }
    
    /* 首页样式 */
    .nav-title {
      text-align: center;
      margin: 20px 0 30px;
      color: white;
      text-shadow: 0 2px 8px rgba(0,0,0,0.3);
    }
    
    .nav-title h1 {
      font-size: 2.5rem;
      margin-bottom: 15px;
      font-weight: 700;
    }
    
    .nav-title p {
      font-size: 1.1rem;
      opacity: 0.9;
    }
    
    .nav-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }
    
    .nav-category {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 16px;
      padding: 20px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
      transition: transform 0.3s, box-shadow 0.3s;
    }
    
    .nav-category:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
    }
    
    .category-title {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 15px;
      padding-bottom: 10px;
      border-bottom: 2px solid #e0e0e0;
      color: #1a73e8;
    }
    
    .category-title i {
      font-size: 1.4rem;
      background: linear-gradient(45deg, #1a73e8, #0d47a1);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }
    
    .category-title h2 {
      font-size: 1.3rem;
      font-weight: 700;
    }
    
    .nav-links {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }
    
    /* 服务监控样式 */
    header {
      text-align: center;
      margin-bottom: 30px;
      padding: 30px 20px;
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
      border-radius: 16px;
      box-shadow: 0 8px 25px rgba(26, 35, 126, 0.2);
      color: white;
      position: relative;
      overflow: hidden;
    }
    
    header::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 5px;
      background: linear-gradient(90deg, var(--success), var(--warning), var(--danger));
    }
    
    .logo {
      display: inline-flex;
      align-items: center;
      gap: 15px;
      background: rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(10px);
      padding: 12px 30px;
      border-radius: 50px;
      margin-bottom: 15px;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }
    
    .logo-icon { font-size: 28px; }
    
    .logo-text { font-size: 24px; font-weight: 700; }
    
    .subtitle {
      font-size: 16px;
      opacity: 0.9;
      max-width: 600px;
      margin: 0 auto 20px;
      line-height: 1.6;
    }
    
    .header-stats {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-top: 15px;
      flex-wrap: wrap;
    }
    
    .stat-item {
      background: rgba(255, 255, 255, 0.15);
      padding: 10px 20px;
      border-radius: 50px;
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 14px;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .stat-value {
      font-weight: 700;
      font-size: 16px;
    }
    
    .refresh-btn {
      background: white;
      color: var(--primary);
      border: none;
      padding: 10px 25px;
      border-radius: 50px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      margin-top: 15px;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      transition: all 0.3s ease;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }
    
    .refresh-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
    }
    
    .status-summary {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }
    
    .summary-card {
      background: var(--card-bg);
      border-radius: 14px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
      padding: 25px;
      text-align: center;
      transition: all 0.3s ease;
      border-top: 4px solid var(--success);
      position: relative;
      overflow: hidden;
    }
    
    .summary-card.uptime { border-top-color: #00bcd4; }
    
    .summary-card.incidents { border-top-color: var(--danger); }
    
    .card-icon {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 15px;
      font-size: 24px;
    }
    
    .status .card-icon { background: rgba(76, 175, 80, 0.15); color: var(--success); }
    .uptime .card-icon { background: rgba(0, 188, 212, 0.15); color: #00bcd4; }
    .incidents .card-icon { background: rgba(244, 67, 54, 0.15); color: var(--danger); }
    
    .card-title {
      font-size: 16px;
      color: #666;
      margin-bottom: 8px;
      font-weight: 500;
    }
    
    .card-value {
      font-size: 32px;
      font-weight: 700;
      margin-bottom: 5px;
    }
    
    .status .card-value { color: var(--success); }
    .uptime .card-value { color: #00bcd4; }
    .incidents .card-value { color: var(--danger); }
    
    .card-desc {
      color: #777;
      font-size: 14px;
      margin-top: 8px;
    }
    
    .services-grid {
      background: var(--card-bg);
      border-radius: 14px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
      overflow: hidden;
      margin-bottom: 40px;
    }
    
    .services-header {
      background: var(--primary);
      color: white;
      padding: 15px 25px;
      font-size: 18px;
      font-weight: 600;
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 12px;
    }
    
    .service-card {
      padding: 20px 25px;
      border-bottom: 1px solid #eee;
    }
    
    .service-card:last-child { border-bottom: none; }
    
    .service-card-header {
      cursor: pointer;
      transition: background-color 0.2s ease;
      border-radius: 8px;
    }
    
    .service-card-header:hover { background-color: #f9f9f9; }
    
    .service-header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 12px;
      flex-wrap: wrap;
      gap: 12px;
    }
    
    .service-name {
      font-size: 18px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .service-name .fa-chevron-down {
      transition: transform 0.3s ease;
      font-size: 12px;
      color: #aaa;
    }
    
    .service-card.expanded .service-name .fa-chevron-down { transform: rotate(180deg); }
    
    .service-status {
      display: flex;
      align-items: center;
      font-size: 14px;
      font-weight: 500;
      padding: 6px 15px;
      border-radius: 30px;
    }
    
    .status-up { background: rgba(76, 175, 80, 0.15); color: var(--success); }
    .status-down { background: rgba(244, 67, 54, 0.15); color: var(--danger); }
    .status-warning { background: rgba(255, 152, 0, 0.15); color: var(--warning); }
    
    .service-details {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.4s ease-in-out;
    }
    
    .service-card.expanded .service-details { max-height: 500px; }
    
    .service-details-content {
      padding-top: 15px;
      border-top: 1px solid #f0f0f0;
      margin-top: 15px;
    }
    
    .service-meta {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 12px 20px;
    }
    
    .meta-item {
      display: flex;
      justify-content: space-between;
      padding: 8px 0;
      border-bottom: 1px dashed #eee;
    }
    
    .meta-label {
      color: #666;
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 14px;
    }
    
    .meta-value {
      font-weight: 600;
      font-size: 14px;
      word-break: break-all;
    }
    
    .detail-chart-container { margin-top: 20px; height: 200px; }
    
    .charts-section, .nas-section { margin-bottom: 30px; }
    
    .section-title {
      font-size: 20px;
      font-weight: 600;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
      color: var(--primary);
    }
    
    .charts-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin-bottom: 25px;
    }
    
    .chart-container {
      background: var(--card-bg);
      border-radius: 14px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
      padding: 20px;
    }
    
    .chart-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }
    
    .chart-title {
      font-size: 16px;
      font-weight: 600;
    }
    
    .chart-wrapper {
      height: 250px;
      position: relative;
    }
    
    /* 通知页面样式 */
    .notification-item {
      padding: 15px 18px;
      border-bottom: 1px solid var(--border-color);
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      transition: background-color 0.2s;
    }
    
    .notification-item:hover {
      background-color: rgba(0, 0, 0, 0.02);
    }
    
    .notification-item:last-child {
      border-bottom: none;
    }
    
    .notification-content {
      flex-grow: 1;
      margin-right: 12px;
      word-break: break-word;
    }
    
    .notification-timestamp {
      font-size: 0.85em;
      color: var(--text-light);
      white-space: nowrap;
      margin-top: 2px;
    }
    
    .loading {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 30px 15px;
      color: var(--text-light);
    }
    
    .loading-spinner {
      width: 40px;
      height: 40px;
      border: 4px solid rgba(0, 0, 0, 0.1);
      border-left-color: var(--primary-color);
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin-bottom: 15px;
    }
    
    .empty-state {
      text-align: center;
      padding: 30px 15px;
      color: var(--text-light);
    }
    
    .error-state {
      text-align: center;
      padding: 30px 15px;
      color: var(--error-color);
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    .status {
      font-size: 0.9em;
      padding: 8px 12px;
      border-radius: 4px;
      background-color: rgba(0, 0, 0, 0.05);
      margin-top: 10px;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }
    
    .status.success {
      color: var(--success-color);
      background-color: rgba(46, 204, 113, 0.1);
    }
    
    .status.error {
      color: var(--error-color);
      background-color: rgba(231, 76, 60, 0.1);
    }
    
    /* NAS 状态样式 */
    .nas-info-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-bottom: 20px;
    }
    
    .nas-info-card {
      background: #fff;
      border-radius: 14px;
      padding: 20px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.07);
      display: flex;
      align-items: center;
      gap: 15px;
    }
    
    .nas-info-icon {
      font-size: 24px;
      color: var(--primary);
      width: 40px;
      text-align: center;
    }
    
    .nas-info-details { flex-grow: 1; }
    
    .nas-info-label {
      font-size: 14px;
      color: #666;
    }
    
    .nas-info-value {
      font-size: 18px;
      font-weight: 600;
    }
    
    .nas-chart-wrapper {
      height: 220px;
      position: relative;
    }
    
    .progress-bar-container { margin-bottom: 10px; }
    
    .progress-bar-info {
      display: flex;
      justify-content: space-between;
      margin-bottom: 8px;
      font-size: 14px;
    }
    
    .progress-bar-label { font-weight: 500; }
    
    .progress-bar-bg {
      background: #e9ecef;
      border-radius: 5px;
      height: 10px;
      overflow: hidden;
    }
    
    .progress-bar-fill {
      background: linear-gradient(90deg, #1e88e5, #42a5f5);
      height: 100%;
      width: 0%;
      transition: width 0.5s ease-out;
      border-radius: 5px;
    }
    
    /* 页脚样式 */
    footer {
      text-align: center;
      margin-top: 40px;
      padding: 20px;
      color: rgba(255, 255, 255, 0.85);
      font-size: 0.9rem;
      border-top: 1px solid rgba(255,255,255,0.2);
    }
    
    /* 错误和加载状态 */
    .error-box {
      background: #fff0f0;
      border-radius: 14px;
      padding: 30px;
      text-align: center;
      margin: 20px;
      border: 1px solid #ffcccc;
    }
    
    /* 响应式设计 */
    @media (max-width: 1200px) {
      .main-content {
        grid-template-columns: 1fr;
      }
      
      .sidebar {
        display: none;
      }
    }
    
    @media (max-width: 992px) {
      .charts-grid { grid-template-columns: 1fr; }
      .nas-info-grid { grid-template-columns: 1fr; }
      .top-bar { flex-direction: column; gap: 15px; }
      .time-weather { width: 100%; justify-content: space-between; }
      .search-container { width: 100%; margin: 15px 0; }
    }
    
    @media (max-width: 768px) {
      .nav-grid { grid-template-columns: 1fr; }
      .nav-links { grid-template-columns: 1fr; }
      .nav-title h1 { font-size: 2rem; }
      .nav-title p { font-size: 1rem; }
      .header-stats { flex-direction: column; gap: 10px; }
      .status-summary { grid-template-columns: 1fr; }
    }
    
    @media (max-width: 480px) {
      .container { padding: 10px; }
      .service-header { flex-direction: column; align-items: flex-start; }
      .service-status { margin-top: 10px; }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- 顶部导航栏 -->
    <div class="top-bar">
      <div class="time-weather">
        <div class="time-info">
          <div class="time" id="current-time">00:00:00</div>
          <div class="date" id="current-date">2023年1月1日 星期一</div>
        </div>
        <div class="weather">
          <i class="fas fa-sun"></i>
          <div class="weather-info">
            <div class="temp">28°C</div>
            <div class="city">北京 · 晴</div>
          </div>
        </div>
      </div>
      
      <div class="search-container">
        <form class="search-box" action="https://www.baidu.com/s" method="get" target="_blank">
          <input type="text" name="wd" placeholder="百度一下..." required>
          <button type="submit"><i class="fas fa-search"></i></button>
        </form>
      </div>
    </div>
    
    <!-- 主标题 -->
    <div class="nav-title">
      <h1>Valar Morghulis 凡人皆有一死</h1>
      <p>想到啥赶紧干</p>
    </div>
    
    <!-- 主内容区域 -->
    <div class="main-content">
      <!-- 左侧导航 -->
      <div class="sidebar">
        <ul class="nav-tabs">
          <li><a href="#" class="active" data-page="home"><i class="fas fa-home"></i> 首页导航</a></li>
          <li><a href="#" data-page="status"><i class="fas fa-heartbeat"></i> 服务监控</a></li>
          <li><a href="#" data-page="notifications"><i class="fas fa-bell"></i> 通知和短信</a></li>
        </ul>
      </div>
      
      <!-- 内容区域 -->
      <div class="content-area">
        <!-- 首页内容 -->
        <div id="page-home" class="page active">
          <div class="nav-grid">
            <!-- 常用网站 -->
            <div class="nav-category">
              <div class="category-title">
                <i class="fas fa-star"></i>
                <h2>常用网站</h2>
              </div>
              <div class="nav-links">
                <a href="https://web.sgwbox.com/home" target="_blank" class="nav-link"><i class="fab fa-chrome"></i> SgwWeb</a>
                <a href="https://ql.111312.xyz/" target="_blank" class="nav-link"><i class="fas fa-question-circle"></i> Qinglong</a>
                <a href="https://otp.111312.xyz/" target="_blank" class="nav-link"><i class="fab fa-github"></i> OTP</a>
                <a href="https://sgw.111312.xyz/#/" target="_blank" class="nav-link"><i class="fab fa-stack-overflow"></i> SgwAlist</a>
                <a href="https://lt.111312.xyz/" target="_blank" class="nav-link"><i class="fab fa-weibo"></i> vocechat</a>
                <a href="https://cs.111312.xyz/" target="_blank" class="nav-link"><i class="fas fa-play-circle"></i> Snapdrop</a>
                <a href="https://sync.111312.xyz/" target="_blank" class="nav-link"><i class="fas fa-play-circle"></i> Syncthing</a>
                <a href="https://stv.111312.xyz/" target="_blank" class="nav-link"><i class="fas fa-play-circle"></i> SgwTV</a>
                <a href="https://ypm.111312.xyz/" target="_blank" class="nav-link"><i class="fas fa-play-circle"></i> YesMusic</a>
                <a href="https://up.111312.xyz/" target="_blank" class="nav-link"><i class="fas fa-play-circle"></i> UpWeb</a>
                <a href="https://dash.cloudflare.com/7dcad7e5c925385adde3ce2a3f5bb271/home/domains" target="_blank" class="nav-link"><i class="fas fa-play-circle"></i> Cloudflare</a>
                <a href="https://tao.111312.xyz/#/home" target="_blank" class="nav-link"><i class="fas fa-play-circle"></i> Taosync</a>
                <a href="https://d8u4-my.sharepoint.com/my" target="_blank" class="nav-link"><i class="fas fa-play-circle"></i> Onedrive</a>
                <a href="https://dashboard.cpolar.com/status" target="_blank" class="nav-link"><i class="fas fa-play-circle"></i> cpolar</a>
              </div>
            </div>
            
            <!-- 社交娱乐 -->
            <div class="nav-category">
              <div class="category-title">
                <i class="fas fa-heart"></i>
                <h2>社交娱乐</h2>
              </div>
              <div class="nav-links">
                <a href="https://wx.qq.com" target="_blank" class="nav-link"><i class="fab fa-weixin"></i> 微信</a>
                <a href="https://im.qq.com" target="_blank" class="nav-link"><i class="fab fa-qq"></i> QQ</a>
                <a href="https://www.douyin.com" target="_blank" class="nav-link"><i class="fas fa-film"></i> 抖音</a>
                <a href="https://music.163.com" target="_blank" class="nav-link"><i class="fas fa-music"></i> 网易云音乐</a>
                <a href="https://www.iqiyi.com" target="_blank" class="nav-link"><i class="fas fa-tv"></i> 爱奇艺</a>
                <a href="https://www.youku.com" target="_blank" class="nav-link"><i class="fas fa-video"></i> 优酷</a>
              </div>
            </div>
          </div>
        </div>
        
        <!-- 服务监控页面 -->
        <div id="page-status" class="page">
          <header>
            <div class="logo"><i class="fas fa-heartbeat logo-icon"></i><div class="logo-text">服务状态监控</div></div>
            <p class="subtitle">基于 UptimeRobot API 的实时监控仪表盘</p>
            <div class="header-stats">
              <div class="stat-item"><i class="fas fa-sync-alt"></i>最后更新: <span id="update-time" class="stat-value">正在加载...</span></div>
              <div class="stat-item"><i class="fas fa-database"></i>监控服务: <span id="total-monitors" class="stat-value">0</span> 个</div>
            </div>
            <button class="refresh-btn" id="refresh-status-btn"><i class="fas fa-sync-alt"></i> 刷新数据</button>
          </header>
          
          <div class="status-summary">
            <div class="summary-card status">
              <div class="card-icon"><i class="fas fa-check-circle"></i></div>
              <div class="card-title">正常运行</div>
              <div class="card-value" id="status-up">0</div>
              <div class="card-desc">当前正常运行的服务数量</div>
            </div>
            <div class="summary-card uptime">
              <div class="card-icon"><i class="fas fa-chart-line"></i></div>
              <div class="card-title">平均正常运行率</div>
              <div class="card-value" id="avg-uptime">0%</div>
              <div class="card-desc">所有服务的平均在线率</div>
            </div>
            <div class="summary-card incidents">
              <div class="card-icon"><i class="fas fa-times-circle"></i></div>
              <div class="card-title">当前故障</div>
              <div class="card-value" id="status-down">0</div>
              <div class="card-desc">需要关注的问题服务</div>
            </div>
          </div>
          
          <div class="nas-section" id="nas-section-container" style="display: none;">
            <h2 class="section-title"><i class="fas fa-server"></i><span>NAS 系统状态</span></h2>
            <div class="nas-info-grid">
              <div class="nas-info-card">
                <i class="fas fa-power-off nas-info-icon"></i>
                <div class="nas-info-details">
                  <div class="nas-info-label">启动于</div>
                  <div id="nas-boot-time" class="nas-info-value">...</div>
                </div>
              </div>
              <div class="nas-info-card">
                <i class="fas fa-history nas-info-icon"></i>
                <div class="nas-info-details">
                  <div class="nas-info-label">已运行</div>
                  <div id="nas-uptime" class="nas-info-value">...</div>
                </div>
              </div>
            </div>
            <div class="nas-stats-grid" id="nas-realtime-stats"></div>
            <div class="charts-grid">
              <div class="chart-container">
                <div class="chart-header"><h3 class="chart-title">CPU 使用率 (近7日)</h3></div>
                <div class="nas-chart-wrapper"><canvas id="nasCpuHistoryChart"></canvas></div>
              </div>
              <div class="chart-container">
                <div class="chart-header"><h3 class="chart-title">网络流量增长 (近7日)</h3></div>
                <div class="nas-chart-wrapper"><canvas id="nasNetworkHistoryChart"></canvas></div>
              </div>
            </div>
          </div>

          <div class="services-grid">
            <div class="services-header">
              <div><i class="fas fa-globe-asia"></i><span>网站监控列表 (点击展开图表)</span></div>
            </div>
            <div id="services-container">
              <div class="loading">
                <div class="loading-spinner"></div>
                <p>正在加载网站监控数据...</p>
              </div>
            </div>
          </div>
          
          <div class="charts-section">
            <h2 class="section-title"><i class="fas fa-chart-bar"></i><span>网站状态总览</span></h2>
            <div class="charts-grid">
              <div class="chart-container">
                <div class="chart-header"><h3 class="chart-title">服务状态分布</h3></div>
                <div class="chart-wrapper"><canvas id="statusChart"></canvas></div>
              </div>
              <div class="chart-container">
                <div class="chart-header"><h3 class="chart-title">平均响应时间 (最近一次)</h3></div>
                <div class="chart-wrapper"><canvas id="responseTimeChart"></canvas></div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- 通知页面 -->
        <div id="page-notifications" class="page">
          <div class="card">
            <div id="notifications-list" class="loading">
              <div class="loading-spinner"></div>
              <div>加载中...</div>
            </div>
          </div>
          
          <div id="status-message"></div>
        </div>
      </div>
    </div>
    
    <footer>
      <p>© 2025 WanChuan | 监控服务由 UptimeRobot API & 本地 NAS 提供支持 | 已收录 <span id="site-count">0</span> 个优质网站</p>
    </footer>
  </div>

  <script>
    // 页面切换功能
    document.addEventListener('DOMContentLoaded', function() {
      const navLinks = document.querySelectorAll('.nav-tabs a');
      const pages = document.querySelectorAll('.page');
      
      navLinks.forEach(link => {
        link.addEventListener('click', function(e) {
          e.preventDefault();
          const targetPage = this.getAttribute('data-page');
          
          // 更新活动状态
          navLinks.forEach(l => l.classList.remove('active'));
          this.classList.add('active');
          
          // 显示对应页面
          pages.forEach(page => page.classList.remove('active'));
          document.getElementById(`page-${targetPage}`).classList.add('active');
        });
      });
      
      // 初始化首页网站计数
      countSites();
    });
    
    // 首页功能
    function updateTime() {
      const now = new Date();
      
      // 格式化时间
      const hours = String(now.getHours()).padStart(2, '0');
      const minutes = String(now.getMinutes()).padStart(2, '0');
      const seconds = String(now.getSeconds()).padStart(2, '0');
      
      // 格式化日期
      const year = now.getFullYear();
      const month = now.getMonth() + 1;
      const day = now.getDate();
      
      // 星期几
      const weekdays = ['星期日', '星期一', '星期二', '星期三', '星期四', '星期五', '星期六'];
      const weekday = weekdays[now.getDay()];
      
      // 更新页面元素
      document.getElementById('current-time').textContent = `${hours}:${minutes}:${seconds}`;
      document.getElementById('current-date').textContent = `${year}年${month}月${day}日 ${weekday}`;
    }
    
    function updateWeather() {
      const temps = [22, 23, 24, 25, 26, 27, 28, 29, 30];
      const weathers = ['晴', '多云', '小雨', '阴'];
      const cities = ['北京', '上海', '广州', '深圳', '杭州', '南京'];
      
      const temp = temps[Math.floor(Math.random() * temps.length)];
      const weather = weathers[Math.floor(Math.random() * weathers.length)];
      const city = cities[Math.floor(Math.random() * cities.length)];
      
      document.querySelector('.temp').textContent = `${temp}°C`;
      document.querySelector('.city').textContent = `${city} · ${weather}`;
      
      // 根据天气更新图标
      const icon = document.querySelector('.weather i');
      if(weather === '晴') {
        icon.className = 'fas fa-sun';
        icon.style.color = '#ff9800';
      } else if(weather === '多云') {
        icon.className = 'fas fa-cloud';
        icon.style.color = '#78909c';
      } else if(weather === '小雨') {
        icon.className = 'fas fa-cloud-rain';
        icon.style.color = '#2196f3';
      } else {
        icon.className = 'fas fa-cloud';
        icon.style.color = '#607d8b';
      }
    }
    
    function countSites() {
      const sites = document.querySelectorAll('.nav-link');
      document.getElementById('site-count').textContent = sites.length;
    }
    
    // 初始调用并设置定时器
    updateTime();
    setInterval(updateTime, 1000);
    
    // 每10分钟更新一次天气
    updateWeather();
    setInterval(updateWeather, 600000);
    
    // 服务监控功能
    const PROXY_API_URL = 'https://up-api.111312.xyz/';
    const STATUS_MAP = {
      0: { text: '暂停中', class: 'status-warning', icon: 'fa-pause-circle' }, 
      1: { text: '未检查', class: 'status-warning', icon: 'fa-question-circle' },
      2: { text: '运行中', class: 'status-up', icon: 'fa-check-circle' }, 
      8: { text: '疑似故障', class: 'status-warning', icon: 'fa-exclamation-circle' },
      9: { text: '服务中断', class: 'status-down', icon: 'fa-times-circle' },
    };
    const RESPONSE_TIME_THRESHOLD = 1000;
    let monitorDataCache = [];
    let statusChartInstance, responseTimeChartInstance, nasCpuHistoryChart, nasNetworkHistoryChart;

    function renderPage(data) {
      if (!data) { showError("未能从API获取到任何数据。"); return; }
      
      if (data.monitors) {
        renderMonitors(data.monitors);
        renderOverviewCharts(data.monitors);
      }
      
      const nasSection = document.getElementById('nas-section-container');
      if (data.nas_stats || data.nas_history) {
        nasSection.style.display = 'block';
        if (data.nas_stats) renderNasProgressBars(data.nas_stats);
        if (data.nas_history) renderNasHistoryCharts(data.nas_history);
      } else {
        nasSection.style.display = 'none';
      }
    }

    function renderMonitors(allMonitors) {
      monitorDataCache = allMonitors;
      const monitors = monitorDataCache.filter(m => m.type === 1 || m.type === 2);
      let upCount = 0, downCount = 0, warningCount = 0, totalUptime = 0;
      document.getElementById('update-time').textContent = new Date().toLocaleTimeString();
      document.getElementById('total-monitors').textContent = `${monitors.length} 个`;
      const servicesHTML = monitors.map(monitor => {
        const status = STATUS_MAP[monitor.status] || { text: '未知', class: 'status-warning', icon: 'fa-question-circle' };
        if (status.class === 'status-up') upCount++; else if (status.class === 'status-down') downCount++; else warningCount++;
        const uptimeRatio = parseFloat(monitor.custom_uptime_ratios?.split('-')[0] || monitor.all_time_uptime_ratio || 0);
        totalUptime += uptimeRatio;
        return `<div class="service-card" id="monitor-card-${monitor.id}"><div class="service-card-header" onclick="toggleDetailChart(${monitor.id})"><div class="service-header"><div class="service-name">${monitor.friendly_name}<i class="fas fa-chevron-down"></i></div><div class="service-status ${status.class}"><i class="fas ${status.icon}"></i> ${status.text}</div></div></div><div class="service-details"><div class="service-details-content"><div class="service-meta"><div class="meta-item"><span class="meta-label"><i class="fas fa-signal"></i> 7日运行率</span><span class="meta-value">${uptimeRatio.toFixed(3)}%</span></div><div class="meta-item"><span class="meta-label"><i class="fas fa-stopwatch"></i> 当前响应</span><span class="meta-value">${monitor.response_times.length > 0 ? monitor.response_times[0].value + 'ms' : 'N/A'}</span></div></div><div class="detail-chart-container"><canvas id="detail-chart-${monitor.id}"></canvas></div></div></div></div>`;
      }).join('');
      document.getElementById('services-container').innerHTML = servicesHTML || '<div class="loading"><p>没有找到网站监控服务。</p></div>';
      document.getElementById('status-up').textContent = upCount;
      document.getElementById('status-down').textContent = downCount;
      document.getElementById('avg-uptime').textContent = monitors.length > 0 ? `${(totalUptime / monitors.length).toFixed(2)}%` : '0%';
    }

    function renderNasProgressBars(stats) {
        document.getElementById('nas-boot-time').textContent = stats.system_time?.boot_time || 'N/A';
        document.getElementById('nas-uptime').textContent = stats.system_time?.uptime || 'N/A';
        const container = document.getElementById('nas-realtime-stats');
        let html = '';
        const items = [
            { icon: 'fa-microchip', label: 'CPU', data: stats.cpu },
            { icon: 'fa-memory', label: '内存', data: stats.memory },
            { icon: 'fa-compact-disc', label: '磁盘', data: stats.disk }
        ];
        items.forEach(item => {
            if(item.data){
                 html += `<div class="nas-info-card">
                    <div class="progress-bar-info" style="width:100%"><span class="progress-bar-label"><i class="fas ${item.icon}"></i> ${item.label}</span><span>${item.data.percent}%</span></div>
                    <div class="progress-bar-bg" style="width:100%"><div class="progress-bar-fill" style="width: ${item.data.percent}%;"></div></div>
                 </div>`;
            }
        });
        container.innerHTML = html;
    }

    function renderNasHistoryCharts(history) {
        if (nasCpuHistoryChart) nasCpuHistoryChart.destroy();
        if (nasNetworkHistoryChart) nasNetworkHistoryChart.destroy();
        const cpuCtx = document.getElementById('nasCpuHistoryChart')?.getContext('2d');
        if (cpuCtx && history.cpu && history.cpu.length > 0) {
            nasCpuHistoryChart = new Chart(cpuCtx, { type: 'line', data: { datasets: [{ label: 'CPU Usage (%)', data: history.cpu.map(d => ({x: d.timestamp * 1000, y: d.usage})), borderColor: 'rgba(30, 136, 229, 0.7)', backgroundColor: 'rgba(30, 136, 229, 0.1)', borderWidth: 2, pointRadius: 0, tension: 0.4, fill: true }] }, options: { responsive: true, maintainAspectRatio: false, scales: { x: { type: 'time', time: { unit: 'day', tooltipFormat: 'yyyy-MM-dd HH:mm' } }, y: { beginAtZero: true, max: 100 } }, plugins: { legend: { display: false } } } });
        }
        const netCtx = document.getElementById('nasNetworkHistoryChart')?.getContext('2d');
        if (netCtx && history.network && history.network.length > 0) {
            const datasets = [
                { iface: 'eth0', recv: 'eth0_recv', sent: 'eth0_sent', color: 'rgba(76, 175, 80, 0.7)'},
                { iface: 'wlan0', recv: 'wlan0_recv', sent: 'wlan0_sent', color: 'rgba(255, 152, 0, 0.7)'},
                { iface: 'docker0', recv: 'docker0_recv', sent: 'docker0_sent', color: 'rgba(156, 39, 176, 0.7)'}
            ].map(config => ({
                label: `${config.iface} 总流量`,
                data: history.network.map(d => ({ x: d.timestamp * 1000, y: ((d[config.recv] || 0) + (d[config.sent] || 0)) / 1024**3 })),
                borderColor: config.color, borderWidth: 2, pointRadius: 0, tension: 0.4, fill: false
            })).filter(ds => ds.data.some(d => d.y > 0)); // Only show interfaces with data
            nasNetworkHistoryChart = new Chart(netCtx, { type: 'line', data: { datasets: datasets }, options: { responsive: true, maintainAspectRatio: false, scales: { x: { type: 'time', time: { unit: 'day', tooltipFormat: 'yyyy-MM-dd' } }, y: { beginAtZero: true, title: { display: true, text: 'GB' } } }, plugins: { legend: { position: 'bottom' } } } });
        }
    }
    
    function toggleDetailChart(monitorId) {
      const card = document.getElementById(`monitor-card-${monitorId}`); if (!card) return;
      const isExpanded = card.classList.toggle('expanded');
      if (isExpanded) { const monitor = monitorDataCache.find(m => m.id === monitorId); if (monitor && monitor.response_times) createDetailChart(monitor); }
    }
    
    function createDetailChart(monitor) {
      const canvasId = `detail-chart-${monitor.id}`, ctx = document.getElementById(canvasId)?.getContext('2d'); if (!ctx) return;
      if (Chart.getChart(ctx)) Chart.getChart(ctx).destroy();
      const chartData = monitor.response_times.map(rt => ({ x: rt.datetime * 1000, y: rt.value })).reverse();
      const pointBackgroundColors = chartData.map(d => d.y > RESPONSE_TIME_THRESHOLD ? 'rgba(244, 67, 54, 1)' : 'rgba(30, 136, 229, 0.7)');
      const pointRadii = chartData.map(d => d.y > RESPONSE_TIME_THRESHOLD ? 4 : 1.5);
      new Chart(ctx, { type: 'line', data: { datasets: [{ label: '响应时间 (ms)', data: chartData, borderColor: 'rgba(30, 136, 229, 0.5)', backgroundColor: 'rgba(30, 136, 229, 0.1)', borderWidth: 2, tension: 0.3, fill: true, pointBackgroundColor: pointBackgroundColors, pointRadius: pointRadii, pointHoverRadius: 6 }] }, options: { responsive: true, maintainAspectRatio: false, scales: { x: { type: 'time', time: { unit: 'hour', displayFormats: { hour: 'HH:mm' } }, grid: { display: false } }, y: { beginAtZero: true, grid: { color: '#eee' } } }, plugins: { legend: { display: false }, tooltip: { callbacks: { label: (c) => ` 响应时间: ${c.parsed.y} ms` } } } } });
    }
    
    function renderOverviewCharts(allMonitors) {
        const monitors = allMonitors.filter(m => m.type === 1 || m.type === 2); let up = 0, down = 0, warning = 0;
        monitors.forEach(m => { const sClass = STATUS_MAP[m.status]?.class || 'status-warning'; if (sClass === 'status-up') up++; else if (sClass === 'status-down') down++; else warning++; });
        let statusChart = Chart.getChart('statusChart'); if(statusChart) statusChart.destroy();
        new Chart(document.getElementById('statusChart'), { type: 'doughnut', data: { labels: ['正常', '警告', '故障'], datasets: [{ data: [up, warning, down], backgroundColor: [ 'rgba(76, 175, 80, 0.8)', 'rgba(255, 152, 0, 0.8)', 'rgba(244, 67, 54, 0.8)' ], borderColor: ['#fff'], borderWidth: 2 }] }, options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'bottom' } } } });
        let rtChart = Chart.getChart('responseTimeChart'); if(rtChart) rtChart.destroy();
        new Chart(document.getElementById('responseTimeChart'), { type: 'bar', data: { labels: monitors.map(m => m.friendly_name.substring(0, 12) + (m.friendly_name.length > 12 ? '...' : '')), datasets: [{ label: '响应时间 (ms)', data: monitors.map(m => m.response_times?.[0]?.value || 0), backgroundColor: 'rgba(30, 136, 229, 0.7)' }] }, options: { responsive: true, maintainAspectRatio: false, scales: { y: { beginAtZero: true } }, plugins: { legend: { display: false } } } });
    }
    
    async function fetchStatusData() {
      try {
        const response = await fetch(PROXY_API_URL, { method: 'POST', cache: 'no-cache' });
        if (!response.ok) throw new Error(`API代理请求失败: ${response.status}`);
        const data = await response.json(); if (!data) throw new Error('API响应为空'); if (data.stat !== 'ok' && !data.nas_stats) throw new Error(`API 返回错误: ${data.error?.message || '未知'}`); return data;
      } catch (error) { console.error('获取监控数据失败:', error); showError(error.message); return null; }
    }
    
    function showError(message) { document.getElementById('services-container').innerHTML = `<div class="error-box"><div class="error-icon"><i class="fas fa-exclamation-triangle"></i></div><h2 class="error-title">加载数据失败</h2><p class="error-desc">${message}</p></div>`; }
    
    async function initStatusPage() {
      const container = document.getElementById('services-container'); container.innerHTML = `<div class="loading"><div class="loading-spinner"></div><p>正在加载全部监控数据...</p></div>`;
      const data = await fetchStatusData(); if (data) renderPage(data);
    }
    
    document.getElementById('refresh-status-btn').addEventListener('click', initStatusPage);
    
    // 通知功能
    const API_ENDPOINT = 'https://jy-api.111312.xyz/notifications';
    let lastFetchTime = null;

    // 显示状态消息
    function showStatus(message, type = 'info') {
      const statusEl = document.getElementById('status-message');
      statusEl.innerHTML = `<div class="status ${type}">${message}</div>`;
      
      // 5秒后自动清除成功消息
      if (type === 'success') {
        setTimeout(() => {
          statusEl.innerHTML = '';
        }, 5000);
      }
    }

    async function fetchNotifications() {
      const notificationsList = document.getElementById('notifications-list');
      notificationsList.innerHTML = `
        <div class="loading-spinner"></div>
        <div>加载中...</div>
      `;
      notificationsList.className = 'loading';

      try {
        const response = await fetch(API_ENDPOINT);
        if (!response.ok) {
          throw new Error(`HTTP错误! 状态码: ${response.status}`);
        }
        const data = await response.json();

        if (data.notifications && data.notifications.length > 0) {
          notificationsList.innerHTML = '';
          notificationsList.className = '';
          
          data.notifications.forEach(notification => {
            const item = document.createElement('div');
            item.className = 'notification-item';
            
            const contentSpan = document.createElement('span');
            contentSpan.className = 'notification-content';
            contentSpan.textContent = notification.content;

            const timestampSpan = document.createElement('span');
            timestampSpan.className = 'notification-timestamp';
            const date = new Date(notification.timestamp);
            timestampSpan.textContent = date.toLocaleString();

            item.appendChild(contentSpan);
            item.appendChild(timestampSpan);
            notificationsList.appendChild(item);
          });
          
          // 更新最后刷新时间
          lastFetchTime = new Date();
          document.getElementById('last-updated').textContent = lastFetchTime.toLocaleTimeString();
          
          showStatus(`成功加载 ${data.notifications.length} 条通知`, 'success');
        } else {
          notificationsList.innerHTML = `
            <div class="empty-state">
              <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="12" y1="8" x2="12" y2="12"></line>
                <line x1="12" y1="16" x2="12.01" y2="16"></line>
              </svg>
              <p>暂无通知或短信</p>
            </div>
          `;
          notificationsList.className = '';
        }

      } catch (error) {
        console.error('获取通知失败:', error);
        notificationsList.innerHTML = `
          <div class="error-state">
            <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="10"></circle>
              <line x1="15" y1="9" x2="9" y2="15"></line>
              <line x1="9" y1="9" x2="15" y2="15"></line>
            </svg>
            <p>加载失败: ${error.message}</p>
          </div>
        `;
        notificationsList.className = '';
        
        showStatus(`加载失败: ${error.message}`, 'error');
      }
    }
    
    // 页面加载时初始化
    document.addEventListener('DOMContentLoaded', function() {
      // 设置初始最后更新时间
      document.getElementById('last-updated').textContent = '--';
      
      // 每5分钟刷新一次服务状态
      setInterval(initStatusPage, 5 * 60 * 1000);
      
      // 每60秒自动刷新一次通知
      setInterval(fetchNotifications, 60000);
    });
  </script>
</body>
</html>
